<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">

<link rel="apple-touch-icon" href="/touch-icon-iphone.png">
<link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png">
<link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png">
<link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png">

<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="iOS,Swift," />





  <link rel="alternate" href="/atom.xml" title="DevOrz" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="ç¿»è¯‘è‡ªRaywenderlichçš„æ–‡ç« ï¼šWhatâ€™s New in Swift 4?Swift 4 æ˜¯Swiftä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬æ›´æ–°ï¼Œé¢„è®¡åœ¨2017å¹´ç§‹æ¨å‡ºBetaç‰ˆã€‚å…¶é‡ç‚¹åœ¨ä¸Swift3çš„å…¼å®¹æ€§å’ŒABIç¨³å®šæ€§ã€‚æœ¬æ–‡é‡ç‚¹ä»‹ç»ä¸€äº›è¿™ä¸ªç‰ˆæœ¬ä¸­æ˜¾è‘—å½±å“ä½ ä»£ç çš„å˜åŒ–ã€‚å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚">
<meta name="keywords" content="iOS,Swift">
<meta property="og:type" content="article">
<meta property="og:title" content="What&#39;s New in Swift4?">
<meta property="og:url" content="https://www.devorz.com/2017/06/19/What-s-New-in-Swift4/index.html">
<meta property="og:site_name" content="DevOrz">
<meta property="og:description" content="ç¿»è¯‘è‡ªRaywenderlichçš„æ–‡ç« ï¼šWhatâ€™s New in Swift 4?Swift 4 æ˜¯Swiftä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬æ›´æ–°ï¼Œé¢„è®¡åœ¨2017å¹´ç§‹æ¨å‡ºBetaç‰ˆã€‚å…¶é‡ç‚¹åœ¨ä¸Swift3çš„å…¼å®¹æ€§å’ŒABIç¨³å®šæ€§ã€‚æœ¬æ–‡é‡ç‚¹ä»‹ç»ä¸€äº›è¿™ä¸ªç‰ˆæœ¬ä¸­æ˜¾è‘—å½±å“ä½ ä»£ç çš„å˜åŒ–ã€‚å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://ooo.0o0.ooo/2017/06/17/59451fb0ae5dd.png">
<meta property="og:updated_time" content="2018-07-13T06:24:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="What&#39;s New in Swift4?">
<meta name="twitter:description" content="ç¿»è¯‘è‡ªRaywenderlichçš„æ–‡ç« ï¼šWhatâ€™s New in Swift 4?Swift 4 æ˜¯Swiftä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬æ›´æ–°ï¼Œé¢„è®¡åœ¨2017å¹´ç§‹æ¨å‡ºBetaç‰ˆã€‚å…¶é‡ç‚¹åœ¨ä¸Swift3çš„å…¼å®¹æ€§å’ŒABIç¨³å®šæ€§ã€‚æœ¬æ–‡é‡ç‚¹ä»‹ç»ä¸€äº›è¿™ä¸ªç‰ˆæœ¬ä¸­æ˜¾è‘—å½±å“ä½ ä»£ç çš„å˜åŒ–ã€‚å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚">
<meta name="twitter:image" content="https://ooo.0o0.ooo/2017/06/17/59451fb0ae5dd.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '2860370',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.devorz.com/2017/06/19/What-s-New-in-Swift4/"/>





  <title>What's New in Swift4? | DevOrz</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-88751319-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f1e21a4dabe008718f0175fb3ac63569";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DevOrz</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">å¦‚æœæ²¡æœ‰è§è¿‡å¤ªé˜³,æˆ‘æœ¬å¯ä»¥å¿å—é»‘æš—</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-feed">
          <a href="/atom.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-rss"></i> <br />
            
            RSS
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.devorz.com/2017/06/19/What-s-New-in-Swift4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iDevOrz">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevOrz">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">What's New in Swift4?</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-06-19T01:17:04+08:00">
                2017-06-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/06/19/What-s-New-in-Swift4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/06/19/What-s-New-in-Swift4/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>ç¿»è¯‘è‡ª<a href="https://www.raywenderlich.com" target="_blank" rel="noopener">Raywenderlich</a>çš„æ–‡ç« ï¼š<a href="https://www.raywenderlich.com/163857/whats-new-swift-4#" target="_blank" rel="noopener">Whatâ€™s New in Swift 4?</a><br>Swift 4 æ˜¯Swiftä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬æ›´æ–°ï¼Œé¢„è®¡åœ¨2017å¹´ç§‹æ¨å‡ºBetaç‰ˆã€‚å…¶é‡ç‚¹åœ¨ä¸Swift3çš„å…¼å®¹æ€§å’ŒABIç¨³å®šæ€§ã€‚<br>æœ¬æ–‡é‡ç‚¹ä»‹ç»ä¸€äº›è¿™ä¸ªç‰ˆæœ¬ä¸­æ˜¾è‘—å½±å“ä½ ä»£ç çš„å˜åŒ–ã€‚å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚<br><a id="more"></a></p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><p>Swift 4åŒ…å«åœ¨Xcode 9ã€‚ä½ å¯ä»¥ä»è‹¹æœçš„<a href="https://developer.apple.com/download/" target="_blank" rel="noopener">developer portal</a>ä¸‹è½½æœ€æ–°çš„Xcode9(éœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„å¼€å‘è€…è´¦å·)ã€‚æ¯ä¸ªBetaç‰ˆçš„Xcode éƒ½ä¼šæ†ç»‘æœ€æ–°çš„Swift 4 å¿«ç…§ã€‚</p>
<p>åœ¨ä½ é˜…è¯»æ—¶ï¼Œä½ ä¼šæ³¨æ„åˆ°<code>[SE-xxxx]</code>æ ¼å¼çš„é“¾æ¥ï¼Œè¿™äº›é“¾æ¥å°†å¸¦ä½ è¿›å»ç›¸å…³çš„<code>Swift Evolution</code>ææ¡ˆã€‚å¦‚æœä½ æƒ³è·å¾—å¾ˆå¤šå’Œä¸»é¢˜ç›¸å…³çš„ä¿¡æ¯ï¼Œè¯·åŠ¡å¿…ç‚¹å¼€å®ƒä»¬ã€‚</p>
<p>æˆ‘æ¨èåœ¨<code>Playground</code>ä¸­å°è¯•Swift 4 çš„æ–°ç‰¹æ€§å’Œæ›´æ–°ï¼Œè¿™æœ‰åŠ©äºåœ¨è„‘æµ·ä¸­å·©å›ºçŸ¥è¯†ï¼Œå¹¶ä½¿ä½ æ·±å…¥æ¯ä¸ªä¸»é¢˜ã€‚æŠŠç©è¿™äº›ä¾‹å­ï¼Œå¹¶å°è¯•æ‰©å±•ï¼æ‰“æ–­ä»–ä»¬ã€‚ç©å¾—å¼€å¿ƒã€‚</p>
<blockquote>
<p>æ³¨ï¼šè¿™ç¯‡æ–‡ä»¶å°†åœ¨ä¸ºæ¯ä¸ªBateç‰ˆçš„Xcodeæ›´æ–°ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ä¸åŒçš„Swiftå¿«ç…§ï¼Œè¿™äº›ä»£ç ä¸ä¿è¯å¯ä»¥è¿è¡Œã€‚</p>
</blockquote>
<h2 id="Migrating-to-Swift-4"><a href="#Migrating-to-Swift-4" class="headerlink" title="Migrating to Swift 4"></a>Migrating to Swift 4</h2><p>ä»Swift 3åˆ° 4 çš„è¿ç§»æ¯” Swift 2.2 åˆ° 3 å°‘äº†å¾ˆå¤šéº»çƒ¦ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œç»å¤§å¤šæ•°çš„æ”¹å˜éƒ½æ˜¯é™„åŠ çš„ï¼Œå¹¶ä¸éœ€è¦å¤§é‡çš„äººä¸ºä¿®æ”¹ã€‚å› æ­¤ï¼ŒSwift è¿ç§»å·¥å…·ä¸ºä½ å¤„ç†å¤šæ•°çš„æ”¹å˜ã€‚<br>Xcode 9 åŒæ—¶æ”¯æŒ Swift 4 å’Œ Swift 3.2ã€‚å¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥é€ä¸ªæŒ‡å®šé¡¹ç›®ä¸­çš„æ¯ä¸ª <code>target</code> ä½¿ç”¨ Swift 3.2 è¿˜æ˜¯ Swift 4ã€‚ è¿ç§»åˆ° å¹¶ä¸æ˜¯å®Œå…¨ä¸å—é™åˆ¶çš„ï¼Œä½ å¯èƒ½éœ€è¦é‡æ–°éƒ¨åˆ†ä»£ç æ¥å…¼å®¹ä¿®çš„ SDK .è€Œä¸”ç”±äº Swift ABI ä»ç„¶å°šæœªç¨³å®šæ‰€ä»¥ä½ éœ€è¦ç”¨ Xcode 9 é‡æ–°ç¼–è¯‘ä½ ä¾èµ–ã€‚<br>å½“ä½ å‡†å¤‡è¿ç§»åˆ° Swift 4 ï¼Œ Xcode 9 å†æ¬¡æä¾›ä¸€ä¸ªå·¥å…·æ¥å¸®åŠ©ä½ ï¼Œä½ å¯ä»¥ç‚¹å‡»<code>Edit/Convert/To Current Swift Syntaxâ€¦</code>æ¥å‘¼å‡ºè½¬æ¢å·¥å…·ã€‚<br>é€‰æ‹©ä½ æƒ³è¦è½¬æ¢çš„ <code>targets</code> åï¼ŒXcode å°†æç¤ºä½  <code>Objective-C</code> æ¨å¯¼ä¸­çš„åå¥½ï¼Œ é€‰æ‹©æ¨èçš„é€‰é¡¹é€šè¿‡é™åˆ¶æ¨æ–­æ¥å‡å°‘ä½ çš„äºŒè¿›åˆ¶æ–‡ä»¶çš„å¤§å°ã€‚ï¼ˆå…³äºè¿™ä¸ªçš„ä¸»é¢˜çš„æ›´å¤šä¿¡æ¯ï¼Œå‚é˜…<a href="https://www.raywenderlich.com/163857/whats-new-swift-4#objc" target="_blank" rel="noopener">Limiting @objc Inference</a>ï¼‰.<br><img src="https://ooo.0o0.ooo/2017/06/17/59451fb0ae5dd.png" alt=""><br>ä¸ºäº†æ›´å¥½åœ°ç†è§£ä½ ä»£ç ä¸­é¢„æœŸçš„å˜åŒ–ï¼Œæˆ‘ä»¬å°†é¦–å…ˆä»‹ç»Swift 4 ä¸­å˜æ›´çš„APIã€‚</p>
<h2 id="API-Changes"><a href="#API-Changes" class="headerlink" title="API Changes"></a>API Changes</h2><p>åœ¨è·³è½¬åˆ° Swift 4 åŠ å…¥çš„æ–°ç‰¹æ–°å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒå¯¹ç°æœ‰çš„ API æœ‰å“ªäº›æ”¹æˆï¼æ”¹å–„ã€‚</p>
<h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><p>Swift 4 ä¸­çš„ <code>String</code> è·å¾—äº†å¾ˆå¤šåº”å¾—çš„ç§°èµã€‚è¿™ä¸ªææ¡ˆåŒ…å«å¤§é‡çš„æ”¹å˜ï¼Œè®©æˆ‘ä»¬æ¥åˆ†è§£ä¸‹<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0163-string-revision-1.md" target="_blank" rel="noopener">[SE-0163]</a>ï¼š</p>
<p>æ€•ä½ æ€€æ—§ï¼Œstrings å†æ¬¡å˜ä¸ºé›†åˆåƒä¹‹å‰çš„ Swift2.0 ä¸€æ ·ã€‚è¿™ä¸ªæ”¹å˜ä½¿ä½ ä¸åœ¨ä¾èµ– <code>characters</code> æ•°ç»„ï¼Œç°åœ¨ä½ ç›´æ¥éå† <code>String</code> å¯¹è±¡ ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> galaxy = <span class="string">"Milky Way ğŸ®"</span></span><br><span class="line"><span class="keyword">for</span> char <span class="keyword">in</span> galaxy &#123;</span><br><span class="line">  <span class="built_in">print</span>(char)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ä»…ä»…æ˜¯å¾ªç¯ï¼Œä½ è¿˜å¯ä»¥è·å¾— <code>Sequence</code> å’Œ <code>Collection</code> æ‰€æœ‰é™„åŠ åŠŸèƒ½;</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">galaxy.<span class="built_in">count</span>       <span class="comment">// 11</span></span><br><span class="line">galaxy.isEmpty     <span class="comment">// false</span></span><br><span class="line">galaxy.<span class="built_in">dropFirst</span>() <span class="comment">// "ilky Way ğŸ®"</span></span><br><span class="line"><span class="type">String</span>(galaxy.reversed()) <span class="comment">// "ğŸ® yaW ykliM"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Filter out any none ASCII characters</span></span><br><span class="line">galaxy.<span class="built_in">filter</span> &#123; char <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> isASCII = char.unicodeScalars.<span class="built_in">reduce</span>(<span class="literal">true</span>, &#123; $<span class="number">0</span> &amp;&amp; $<span class="number">1</span>.isASCII &#125;)</span><br><span class="line">  <span class="keyword">return</span> isASCII</span><br><span class="line">&#125; <span class="comment">// "Milky Way "</span></span><br></pre></td></tr></table></figure>
<p>ASCII çš„ä¾‹å­æ¼”ç¤ºäº†å¯¹ <code>Character</code> ä¸€ä¸ªå°æ”¹è¿›,ç°åœ¨ä½ å¯ä»¥ä» <code>Character</code> ç›´æ¥è®¿é—® <code>UnicodeScalarView</code>,ä»¥å‰ä½ éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„ <code>String</code><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0178-character-unicode-view.md" target="_blank" rel="noopener">[SE-0178]</a>ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªé™„åŠ çš„æ—¶å€™ <code>StringProtocol</code>,<br>å®ƒå£°æ˜ä»¥å‰åœ¨ <code>String</code> ä¸Šå£°æ˜çš„å¤§éƒ¨åˆ†åŠŸèƒ½ã€‚è¿™ç§å˜åŒ–çš„åŸå› æ˜¯ä¸ºäº†æ”¹å–„åˆ‡ç‰‡å·¥ä½œã€‚Swift 4 åœ¨ <code>String</code> ä¸­å¢åŠ äº† <code>Substring</code> ç±»å‹ï¼Œç»§æ‰¿è‡ª <code>StringProtocol</code>ã€‚</p>
<p><code>String</code> å’Œ <code>Substring</code> éƒ½å®ç°äº† <code>StringProtocol</code>,è¿™æ˜¯ä¸¤è€…å‡ ä¹æ‹¥æœ‰ç›¸åŒçš„åŠŸèƒ½ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// Grab a subsequence of String</span></span><br><span class="line"><span class="keyword">let</span> endIndex = galaxy.index(galaxy.startIndex, offsetBy: <span class="number">3</span>)</span><br><span class="line"><span class="keyword">var</span> milkSubstring = galaxy[galaxy.startIndex...endIndex]   <span class="comment">// "Milk"</span></span><br><span class="line">type(of: milkSubstring)   <span class="comment">// Substring.Type</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Concatenate a String onto a Substring</span></span><br><span class="line">milkSubstring += <span class="string">"ğŸ¥›"</span>     <span class="comment">// "MilkğŸ¥›"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Create a String from a Substring</span></span><br><span class="line"><span class="keyword">let</span> milkString = <span class="type">String</span>(milkSubstring) <span class="comment">// "MilkğŸ¥›"</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€é¡¹æ”¹è¿›æ˜¯ <code>String</code> å¯¹å­—å½¢ç°‡çš„è§£è¯»ï¼Œè¿™ä¸ªå†³è®®æ¥è‡ªäºUnicode 9çš„æ”¹ç¼–ã€‚åœ¨è¿™ä¹‹å‰ï¼Œå¤šç ç‚¹ï¼ˆmultiple code pointsï¼‰æ„æˆçš„ unicode å­—ç¬¦çš„ count ç»“æœå¤§äº1ï¼Œè¿™é€šå¸¸å‘ç”Ÿåœ¨é€‰å®šè‚¤è‰²çš„emojiè¡¨æƒ…ï¼Œä¸‹é¢æ˜¯ä¸€äº›å‰åå¯¹æ¯”ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"ğŸ‘©â€ğŸ’»"</span>.<span class="built_in">count</span> <span class="comment">// Now: 1, Before: 2</span></span><br><span class="line"><span class="string">"ğŸ‘ğŸ½"</span>.<span class="built_in">count</span> <span class="comment">// Now: 1, Before: 2</span></span><br><span class="line"><span class="string">"ğŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨"</span>.<span class="built_in">count</span> <span class="comment">// Now: 1, Before, 4</span></span><br></pre></td></tr></table></figure>
<p>è¿™åªæ˜¯<a href="https://github.com/apple/swift/blob/master/docs/StringManifesto.md" target="_blank" rel="noopener">[String Manifesto]</a>çš„ä¸€éƒ¨åˆ†ï¼Œä½ å¯ä»¥é˜…è¯»é¢„æœŸæ”¹åŠ¨çš„åŸå§‹åŠ¨æœºå’Œè¢«æè®®åçš„ç­”å¤ã€‚</p>
<h3 id="Dictionary-å’Œ-Set"><a href="#Dictionary-å’Œ-Set" class="headerlink" title="Dictionary å’Œ Set"></a>Dictionary å’Œ Set</h3><p>è‡³äº <code>Collection</code> ç±»å‹ï¼Œ<code>Set</code> å’Œ  <code>Dictionary</code> ä¸æ˜¯å¾ˆç›´è§‚ï¼Œå¹¸è¿çš„æ˜¯ï¼ŒSwift å›¢é˜Ÿç»™äº†å®ƒä»¬å¾ˆå¤šå¿…è¦çš„å…³ç…§ <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0165-dict.md" target="_blank" rel="noopener">[SE-0165]</a>.</p>
<h4 id="Sequence-Based-Initialization"><a href="#Sequence-Based-Initialization" class="headerlink" title="Sequence Based Initialization"></a>Sequence Based Initialization</h4><p>ç¬¬ä¸€ä¸ªæ˜¯å¯ä»¥åˆ›å»ºä¸€ä¸ªdictionary ä»åºåˆ—çš„é”®å€¼å¯¹ï¼ˆå…ƒç»„ï¼‰ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> nearestStarNames = [<span class="string">"Proxima Centauri"</span>, <span class="string">"Alpha Centauri A"</span>, <span class="string">"Alpha Centauri B"</span>, <span class="string">"Barnard's Star"</span>, <span class="string">"Wolf 359"</span>]</span><br><span class="line"><span class="keyword">let</span> nearestStarDistances = [<span class="number">4.24</span>, <span class="number">4.37</span>, <span class="number">4.37</span>, <span class="number">5.96</span>, <span class="number">7.78</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// Dictionary from sequence of keys-values</span></span><br><span class="line"><span class="keyword">let</span> starDistanceDict = <span class="type">Dictionary</span>(uniqueKeysWithValues: <span class="built_in">zip</span>(nearestStarNames, nearestStarDistances)) </span><br><span class="line"><span class="comment">// ["Wolf 359": 7.78, "Alpha Centauri B": 4.37, "Proxima Centauri": 4.24, "Alpha Centauri A": 4.37, "Barnard's Star": 5.96]</span></span><br></pre></td></tr></table></figure>
<h4 id="Duplicate-Key-Resolution"><a href="#Duplicate-Key-Resolution" class="headerlink" title="Duplicate Key Resolution"></a>Duplicate Key Resolution</h4><p>ç°åœ¨ä½ å¯ä»¥ç”¨å–œæ¬¢çš„æ–¹å¼å¤åˆ¶ keys å®ä¾‹åŒ–ä¸€ä¸ª dictionaryï¼Œè¿™ä½¿æˆ‘ä»¬ä¸éœ€è¦å†™ç¹ççš„é”®å€¼å¯¹å…³ç³»è¯­å¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Random vote of people&apos;s favorite stars</span><br><span class="line">let favoriteStarVotes = [&quot;Alpha Centauri A&quot;, &quot;Wolf 359&quot;, &quot;Alpha Centauri A&quot;, &quot;Barnard&apos;s Star&quot;]</span><br><span class="line"></span><br><span class="line">// Merging keys with closure for conflicts</span><br><span class="line">let mergedKeysAndValues = Dictionary(zip(favoriteStarVotes, repeatElement(1, count: favoriteStarVotes.count)), uniquingKeysWith: +) // [&quot;Barnard&apos;s Star&quot;: 1, &quot;Alpha Centauri A&quot;: 2, &quot;Wolf 359&quot;: 1]</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä½¿ç”¨äº† zip å’Œ ç¼©å†™ + å¤„ç†é‡å¤çš„ keys å’Œå†²çªçš„ values ã€‚</p>
<blockquote>
<p>æ³¨ï¼š å¦‚æœä½ ä¸ç†Ÿæ‚‰ <code>zip</code> ä½ å¯ä»¥å¿«é€Ÿçš„åœ¨Appleçš„ <a href="https://developer.apple.com/documentation/swift/1541125-zip" target="_blank" rel="noopener">[Swift Documentation]</a> å­¦ä¹ å®ƒã€‚</p>
</blockquote>
<h4 id="Filtering"><a href="#Filtering" class="headerlink" title="Filtering"></a>Filtering</h4><p> <code>Dictionary</code> å’Œ <code>Set</code> ç°åœ¨å¯ä»¥ç­›é€‰å°†ç»“æœèµ‹ç»™ä¸€ä¸ªæ–°çš„åŒç±»å‹å¯¹è±¡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Filtering results into dictionary rather than array of tuples</span></span><br><span class="line"><span class="keyword">let</span> closeStars = starDistanceDict.<span class="built_in">filter</span> &#123; $<span class="number">0</span>.value &lt; <span class="number">5.0</span> &#125;</span><br><span class="line">closeStars <span class="comment">// Dictionary: ["Proxima Centauri": 4.24, "Alpha Centauri A": 4.37, "Alpha Centauri B": 4.37]</span></span><br></pre></td></tr></table></figure>
<h4 id="Dictionary-Mapping"><a href="#Dictionary-Mapping" class="headerlink" title="Dictionary Mapping"></a>Dictionary Mapping</h4><p><code>Dictionary</code> è·å¾—äº†ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ–¹æ³•ç”¨æ¥ map å®ƒçš„ valuesï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Mapping values directly resulting in a dictionary</span></span><br><span class="line"><span class="keyword">let</span> mappedCloseStars = closeStars.mapValues &#123; <span class="string">"\($0)"</span> &#125;</span><br><span class="line">mappedCloseStars <span class="comment">// ["Proxima Centauri": "4.24", "Alpha Centauri A": "4.37", "Alpha Centauri B": "4.37"]</span></span><br></pre></td></tr></table></figure>
<h4 id="Dictionary-Default-Values"><a href="#Dictionary-Default-Values" class="headerlink" title="Dictionary Default Values"></a>Dictionary Default Values</h4><p>è®¿é—® <code>Dictionary</code>  çš„ value æ—¶ï¼Œå¸¸è§çš„åšæ³•æ˜¯ä½¿ç”¨ <code>nil coalescing operator</code> æ¥ç»™ä¸€ä¸ªé»˜è®¤å€¼ï¼ˆè¯‘è€…æ³¨ ï¼š<code>a != nil ? a! : b</code> çš„æ–¹å¼ï¼Œè§<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/BasicOperators.html" target="_blank" rel="noopener">[Basic Operators]</a>ã€‚åœ¨ Swift 4 ç°åœ¨æœ‰äº†ç®€æ´çš„å¤šçš„æ–¹å¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Subscript with a default value</span></span><br><span class="line"><span class="keyword">let</span> siriusDistance = mappedCloseStars[<span class="string">"Wolf 359"</span>, <span class="keyword">default</span>: <span class="string">"unknown"</span>] <span class="comment">// "unknown"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Subscript with a default value used for mutating</span></span><br><span class="line"><span class="keyword">var</span> starWordsCount: [<span class="type">String</span>: <span class="type">Int</span>] = [:]</span><br><span class="line"><span class="keyword">for</span> starName <span class="keyword">in</span> nearestStarNames &#123;</span><br><span class="line">  <span class="keyword">let</span> numWords = starName.<span class="built_in">split</span>(separator: <span class="string">" "</span>).<span class="built_in">count</span></span><br><span class="line">  starWordsCount[starName, <span class="keyword">default</span>: <span class="number">0</span>] += numWords <span class="comment">// Amazing </span></span><br><span class="line">&#125;</span><br><span class="line">starWordsCount <span class="comment">// ["Wolf 359": 2, "Alpha Centauri B": 3, "Proxima Centauri": 2, "Alpha Centauri A": 3, "Barnard's Star": 2]</span></span><br></pre></td></tr></table></figure>
<p>ä»¥å‰è¿™ç§ä½è½¬å˜éœ€è¦åŒ…è£¹åœ¨è‡ƒè‚¿çš„ <code>if-let</code> è¯­å¥ä¸­ï¼Œåœ¨ Swift 4 ä¸­å¯èƒ½åªéœ€è¦ä¸€è¡Œã€‚</p>
<h4 id="Dictionary-Grouping"><a href="#Dictionary-Grouping" class="headerlink" title="Dictionary Grouping"></a>Dictionary Grouping</h4><p>å¦ä¸€ä¸ªå‡ºå¥‡æœ‰ç”¨çš„é™„åŠ åŠŸèƒ½å¯ä»¥ä» <code>Sequence</code> å®ä¾‹åŒ–ä¸€ä¸ª <code>Dictionary</code> ï¼Œå¹¶å°†å…¶åˆ†ç»„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Grouping sequences by computed key</span></span><br><span class="line"><span class="keyword">let</span> starsByFirstLetter = <span class="type">Dictionary</span>(grouping: nearestStarNames) &#123; $<span class="number">0</span>.first! &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["B": ["Barnard's Star"], "A": ["Alpha Centauri A", "Alpha Centauri B"], "W": ["Wolf 359"], "P": ["Proxima Centauri"]]</span></span><br></pre></td></tr></table></figure>
<p>å½“å¯¹ç‰¹å®šçš„æ•°æ®è¿›è¡Œå½’ç±»æ—¶ä¼šå˜å¾—å¾ˆæ–¹ä¾¿ã€‚</p>
<h4 id="Reserving-Capacity"><a href="#Reserving-Capacity" class="headerlink" title="Reserving Capacity"></a>Reserving Capacity</h4><p><code>Sequence</code> å’Œ <code>Dictionary</code> ç°åœ¨éƒ½å…·å¤‡ä¿ç•™å®¹é‡çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Improved Set/Dictionary capacity reservation</span></span><br><span class="line">starWordsCount.capacity  <span class="comment">// 6</span></span><br><span class="line">starWordsCount.reserveCapacity(<span class="number">20</span>) <span class="comment">// reserves at _least_ 20 elements of capacity</span></span><br><span class="line">starWordsCount.capacity <span class="comment">// 24</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™äº›ç±»å‹ä¸­ï¼Œé‡æ–°åˆ†é…æ˜¯ä»£ä»·é«˜æ˜‚çš„ä»»åŠ¡ã€‚ä½¿ç”¨ <code>reserveCapacity(_:)</code> å¯ä»¥å¾ˆå®¹æ˜“çš„æ”¹å–„æ‰§è¡Œæ•ˆç‡ã€‚<br>è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ”¹å˜ï¼Œæ‰€ä»¥åŠ¡å¿…æ£€æŸ¥è¿™ä¸¤ä¸ªç±»å‹ï¼Œæƒ³åŠæ³•ä½¿ç”¨è¿™äº›æ–°ç‰¹æ€§æ¥ä¼˜åŒ–ä½ çš„ä»£ç ã€‚</p>
<h4 id="Private-Access-Modifier"><a href="#Private-Access-Modifier" class="headerlink" title="Private Access Modifier"></a>Private Access Modifier</h4><p>åœ¨ Swift 3 ä¸Šå¤§å®¶å¹¶ä¸æ˜¯å¾ˆå–œæ¬¢åŠ å…¥çš„ <code>fileprivate</code>, ç†è®ºä¸Šï¼Œå®ƒå¾ˆä¸é”™ï¼Œä½†æ˜¯å®è·µä¸­å®ƒçš„ç”¨æ³•æ—¶å¸¸è®©äººå›°æƒ‘ã€‚åœ¨æˆå‘˜å†…éƒ¨ä½¿ç”¨ <code>private</code>,å½“ä½ åœ¨ç›¸åŒçš„æ–‡ä»¶å…±äº«æˆå‘˜å˜é‡çš„è®¿é—®æ—¶å¾ˆå°‘ä½¿ç”¨ <code>fileprivate</code>ã€‚<br>é—®é¢˜æ˜¯ Swift é¼“åŠ±ä½¿ç”¨ extensions æ¥å°†ä»£ç æŒ‰é€»è¾‘åˆ†ç»„ã€‚extension åœ¨æˆå‘˜å˜é‡çš„åŸå§‹ä½œç”¨åŸŸä¹‹å¤–ï¼Œå¯¼è‡´å¹¿æ³›åœ°éœ€è¦ä½¿ç”¨ <code>fileprivate</code> ã€‚<br>Swift 4 æ„è¯†åˆ°ä¸Šè¿°åœ¨ç±»å‹å’Œ extension å…±äº«è®¿é—®æƒçš„åˆè¡·ï¼Œä½†æ˜¯å®ƒåªåœ¨ç›¸åŒçš„æºæ–‡ä»¶ä¸­æœ‰æ•ˆ <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0169-improve-interaction-between-private-declarations-and-extensions.md" target="_blank" rel="noopener">[SE-0169]</a>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SpaceCraft</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">let</span> warpCode: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">init</span>(warpCode: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.warpCode = warpCode</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">SpaceCraft</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">goToWarpSpeed</span><span class="params">(warpCode: String)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> warpCode == <span class="keyword">self</span>.warpCode &#123; <span class="comment">// Error in Swift 3 unless warpCode is fileprivate</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">"Do it Scotty!"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> enterprise = <span class="type">SpaceCraft</span>(warpCode: <span class="string">"KirkIsCool"</span>)</span><br><span class="line"><span class="comment">//enterprise.warpCode  // error: 'warpCode' is inaccessible due to 'private' protection level</span></span><br><span class="line">enterprise.goToWarpSpeed(warpCode: <span class="string">"KirkIsCool"</span>) <span class="comment">// "Do it Scotty!"</span></span><br></pre></td></tr></table></figure>
<p>è¿™è®©ä½ å¯ä»¥å®ç°åŸæœ¬ <code>fileprivate</code> çš„ç›®çš„ï¼Œè€Œä¸éœ€è¦æ‚ä¹±çš„ä»£ç ã€‚</p>
<h2 id="API-Additions"><a href="#API-Additions" class="headerlink" title="API Additions"></a>API Additions</h2><p>ç°åœ¨è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹ Swift 4 çš„æ–°ç‰¹æ€§ï¼Œè¿™äº›æ”¹å˜åªæ˜¯ä¸€ä¸‹ç®€å•çš„é™„åŠ åŠŸèƒ½ï¼Œä¸ä¼šç ´åä½ ç°æœ‰çš„ä»£ç ã€‚</p>
<h3 id="Archival-and-Serialization"><a href="#Archival-and-Serialization" class="headerlink" title="Archival and Serialization"></a>Archival and Serialization</h3><p>ç›®å‰ä¸ºæ­¢ï¼ŒSwift ä¸­è‡ªå®šä¹‰ç±»å‹çš„åºåˆ—åŒ–å’Œå½’æ¡£æœ‰å¤ªå¤šçš„å‘ï¼Œå¯¹äº <code>class</code> ç±»å‹ï¼Œä½ éœ€è¦å­ç±»åŒ– <code>NSObject</code> å¹¶ä¸”å®ç° <code>NSCoding</code>åè®®ã€‚</p>
<p>è€Œåƒ <code>struct</code> å’Œ <code>enum</code> è¿™æ ·çš„å€¼ç±»å‹ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªå­ç±»é€šè¿‡æ‰©å±• <code>NSObject</code> å’Œ <code>NSCoding</code> çš„ hacks æ¥å®ç°ã€‚<br>Swift 4  è§£å†³äº†è¿™ä¸‰ç§ç±»å‹çš„åºåˆ—åŒ–é—®é¢˜<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0166-swift-archival-serialization.md" target="_blank" rel="noopener">[SE-0166]</a>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CuriosityLog</span>: <span class="title">Codable</span> </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">Discovery</span>: <span class="title">String</span>, <span class="title">Codable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> rock, water, martian</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> sol: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">var</span> discoveries: [<span class="type">Discovery</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create a log entry for Mars sol 42</span></span><br><span class="line"><span class="keyword">let</span> logSol42 = <span class="type">CuriosityLog</span>(sol: <span class="number">42</span>, discoveries: [.rock, .rock, .rock, .rock])</span><br></pre></td></tr></table></figure>
<p> ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°åœ¨ Swift ä¸­ç±»å‹çš„ <code>Encodable</code> å’Œ <code>Decodable</code> åªéœ€è¦å®ç° <code>Codable</code> åè®®ï¼Œå¦‚æœæ‰€æœ‰çš„å±æ€§éƒ½å®ç°äº† <code>Codable</code> åè®®ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†è‡ªåŠ¨å®Œæˆåè®®çš„å®ç°ã€‚<br>å¯¹å¯¹è±¡è¿›è¡Œç¼–ç ï¼Œä½ éœ€è¦æŠŠå®ƒäº¤ç»™ä¸€ä¸ªç¼–ç å™¨ï¼ŒSwift 4 å¼€å§‹ç§¯æçš„å®ç°ç¼–ç å™¨ã€‚æ¯ä¸ªç¼–ç å™¨æŒ‰ç…§ä¸åŒçš„ schemes ã€‚ï¼ˆæ³¨ï¼šè¯¥ææ¡ˆçš„éƒ¨åˆ†å†…å®¹ä»åœ¨å¼€å‘ä¸­ï¼‰ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonEncoder = <span class="type">JSONEncoder</span>() <span class="comment">// One currently available encoder</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Encode the data</span></span><br><span class="line"><span class="keyword">let</span> jsonData = <span class="keyword">try</span> jsonEncoder.encode(logSol42)</span><br><span class="line"><span class="comment">// Create a String from the data</span></span><br><span class="line"><span class="keyword">let</span> jsonString = <span class="type">String</span>(data: jsonData, encoding: .utf8) <span class="comment">// "&#123;"sol":42,"discoveries":["rock","rock","rock","rock"]&#125;"</span></span><br></pre></td></tr></table></figure>
<p>å®ƒå°†ä¸€ä¸ªå¯¹è±¡è‡ªç¼–ç æˆ JSON å¯¹è±¡ï¼Œè¯·åŠ¡å¿…æ£€æŸ¥ <code>JSONEncoder</code> çš„å±æ€§æ¥å®šåˆ¶å®ƒçš„è¾“å‡ºã€‚</p>
<p>è¿‡ç¨‹çš„æœ€åä¸€éƒ¨åˆ†æ˜¯è§£ç æ•°æ®ä¸ºä¸€ä¸ªå…·ä½“å¯¹è±¡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonDecoder = <span class="type">JSONDecoder</span>() <span class="comment">// Pair decoder to JSONEncoder</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Attempt to decode the data to a CuriosityLog object</span></span><br><span class="line"><span class="keyword">let</span> decodedLog = <span class="keyword">try</span> jsonDecoder.decode(<span class="type">CuriosityLog</span>.<span class="keyword">self</span>, from: jsonData)</span><br><span class="line">decodedLog.sol         <span class="comment">// 42</span></span><br><span class="line">decodedLog.discoveries <span class="comment">// [rock, rock, rock, rock]</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä½¿ç”¨ Swift 4çš„ encoding/decodingï¼Œè·å¾—Swiftçš„ç±»å‹å®‰å…¨æ€§ã€‚åŒæ—¶ä¸ä¾èµ– @objc åè®®çš„å¼€é”€å’Œé™åˆ¶ã€‚</p>
<h3 id="Key-Value-Coding"><a href="#Key-Value-Coding" class="headerlink" title="Key-Value Coding"></a>Key-Value Coding</h3><p>ç›®å‰ä¸ºæ­¢ï¼Œç”±äºå‡½æ•°æ˜¯ä¸€ä¸ªé—­åŒ…çš„ç¼˜æ•…ï¼Œä½ å¯ä»¥åœ¨ä¸è°ƒç”¨å‡½æ•°çš„æƒ…å†µä¸‹å¯¹å‡½æ•°è¿›è¡Œå¼•ç”¨ã€‚ä½ ä¸èƒ½åšçš„é€šè¿‡å±æ€§è®¿é—®æ˜¯æ²¡æœ‰æš´éœ²å€Ÿå£çš„ç§æœ‰å˜é‡ã€‚</p>
<p>ä»¤äººå…´å¥‹çš„æ˜¯ Swift 4 å¯ä»¥ç”¨å¯¹è±¡çš„ Key paths æ¥ get/set ç§æœ‰å˜é‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Lightsaber</span> </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">Color</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> blue, green, red</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> color: <span class="type">Color</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ForceUser</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> lightsaber: <span class="type">Lightsaber</span></span><br><span class="line">  <span class="keyword">var</span> master: <span class="type">ForceUser</span>?</span><br><span class="line"></span><br><span class="line">  <span class="keyword">init</span>(name: <span class="type">String</span>, lightsaber: <span class="type">Lightsaber</span>, master: <span class="type">ForceUser</span>? = <span class="literal">nil</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.name = name</span><br><span class="line">    <span class="keyword">self</span>.lightsaber = lightsaber</span><br><span class="line">    <span class="keyword">self</span>.master = master</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sidious = <span class="type">ForceUser</span>(name: <span class="string">"Darth Sidious"</span>, lightsaber: <span class="type">Lightsaber</span>(color: .red))</span><br><span class="line"><span class="keyword">let</span> obiwan = <span class="type">ForceUser</span>(name: <span class="string">"Obi-Wan Kenobi"</span>, lightsaber: <span class="type">Lightsaber</span>(color: .blue))</span><br><span class="line"><span class="keyword">let</span> anakin = <span class="type">ForceUser</span>(name: <span class="string">"Anakin Skywalker"</span>, lightsaber: <span class="type">Lightsaber</span>(color: .blue), master: obiwan)</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œä½ åˆ›å»ºäº†ä¸€äº› <code>ForceUser</code> å®ä¾‹ï¼Œé€šè¿‡è®¾ç½®ä»–ä»¬çš„ name ã€ lightsaber å’Œ master ã€‚åˆ›å»º key path ï¼Œä½ åªéœ€ä½¿ç”¨ä¸€ä¸ªåæ–œæ åé¢è·Ÿä¸Šä½ æ„Ÿå…´è¶£çš„å±æ€§:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create reference to the ForceUser.name key path</span></span><br><span class="line"><span class="keyword">let</span> nameKeyPath = \<span class="type">ForceUser</span>.name</span><br><span class="line"></span><br><span class="line"><span class="comment">// Access the value from key path on instance</span></span><br><span class="line"><span class="keyword">let</span> obiwanName = obiwan[keyPath: nameKeyPath]  <span class="comment">// "Obi-Wan Kenobi"</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ ç»™ <code>ForceUser</code> çš„ <code>name</code> å±æ€§åˆ›å»ºäº†ä¸€ä¸ª key pathã€‚ç„¶åä½¿ç”¨è¿™ä¸ª key path é€šè¿‡æ–°çš„ä¸‹æ ‡ <code>keyPath</code> è¿™ä¸ªä¸‹ä¸‹æ ‡ç°åœ¨åœ¨æ¯ç§ç±»å‹éƒ½å¯ä»¥ç”¨ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€äº›é€šè¿‡ key path è®¿é—®å­å¯¹è±¡ï¼Œè®¾ç½®å±æ€§ï¼Œæ„å»º key path å¼•ç”¨çš„ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Use keypath directly inline and to drill down to sub objects</span></span><br><span class="line"><span class="keyword">let</span> anakinSaberColor = anakin[keyPath: \<span class="type">ForceUser</span>.lightsaber.color]  <span class="comment">// blue</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Access a property on the object returned by key path</span></span><br><span class="line"><span class="keyword">let</span> masterKeyPath = \<span class="type">ForceUser</span>.master</span><br><span class="line"><span class="keyword">let</span> anakinMasterName = anakin[keyPath: masterKeyPath]?.name  <span class="comment">// "Obi-Wan Kenobi"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Change Anakin to the dark side using key path as a setter</span></span><br><span class="line">anakin[keyPath: masterKeyPath] = sidious</span><br><span class="line">anakin.master?.name <span class="comment">// Darth Sidious</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Note: not currently working, but works in some situations</span></span><br><span class="line"><span class="comment">// Append a key path to an existing path</span></span><br><span class="line"><span class="comment">//let masterNameKeyPath = masterKeyPath.appending(path: \ForceUser.name)</span></span><br><span class="line"><span class="comment">//anakin[keyPath: masterKeyPath] // "Darth Sidious"</span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">key path ä¹‹ç¾åœ¨äºå®ƒåœ¨ <span class="type">Swift</span> ä¸­æ˜¯åšå›ºçš„ï¼Œä¸åƒ <span class="type">Objective</span>-<span class="type">C</span> ä¸­çš„ string é‚£ä¹ˆå‡Œä¹±ã€‚</span><br><span class="line"></span><br><span class="line">### <span class="type">Multi</span>-line <span class="type">String</span> <span class="type">Literals</span></span><br><span class="line">åˆ›å»ºå¤šè¡Œæ–‡æœ¬æ˜¯å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸€ä¸ªéå¸¸æ™®éçš„ç‰¹æ€§ã€‚<span class="type">Swift</span> <span class="number">4</span> åŠ å…¥è¿™ä¸ªç®€å•ä½†æ˜¯æœ‰ç”¨çš„è¯­æ³•ï¼Œç”¨ä¸‰ä¸ªå¼•å·åŒ…è£…æ–‡æœ¬[[<span class="type">SE</span>-<span class="number">0168</span>]](https:<span class="comment">//github.com/apple/swift-evolution/blob/master/proposals/0168-multi-line-string-literals.md)ï¼š</span></span><br><span class="line"></span><br><span class="line">```swift</span><br><span class="line"><span class="keyword">let</span> star = <span class="string">"â­ï¸"</span></span><br><span class="line"><span class="keyword">let</span> introString = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">  A long time ago in a galaxy far,</span></span><br><span class="line"><span class="string">  far away....</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  You could write multi-lined strings</span></span><br><span class="line"><span class="string">  without "</span>escaping<span class="string">" single quotes.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  The indentation of the closing quotes</span></span><br><span class="line"><span class="string">       below deside where the text line</span></span><br><span class="line"><span class="string">  begins.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  You can even dynamically add values</span></span><br><span class="line"><span class="string">  from properties: \(star)</span></span><br><span class="line"><span class="string">  "</span><span class="string">""</span></span><br><span class="line"><span class="built_in">print</span>(introString) <span class="comment">// prints the string exactly as written above with the value of star</span></span><br></pre></td></tr></table></figure>
<p>å½“æ„å»º <code>XML/JSON</code> ä¿¡æ¯æˆ–è€… UI ä¸Šçš„é•¿æ–‡å­—æ’ç‰ˆæ—¶ï¼Œè¿™æ˜¯æä¸ºæœ‰ç”¨çš„ã€‚</p>
<h3 id="One-Sided-Ranges"><a href="#One-Sided-Ranges" class="headerlink" title="One-Sided Ranges"></a>One-Sided Ranges</h3><p>ä¸ºäº†å‡å°‘å†—ä½™å’Œæé«˜å¯è¯»æ€§ï¼Œæ ‡å‡†åº“ç°åœ¨å¯ä»¥ä½¿ç”¨åŠå¼€åŒºé—´æ¥æ¨æ–­å¼€å§‹å’Œç»“æŸçš„ç´¢å¼•<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0172-one-sided-ranges.md" target="_blank" rel="noopener">[SE-0172]</a>ã€‚<br>ä»é›†åˆçš„ä¸€ä¸ªç´¢å¼•åˆ°å¼€å§‹æˆ–è€…ç»“æŸçš„ç´¢å¼•åˆ›å»ºä¸€ä¸ªåŒºé—´ï¼Œæœ‰äº†éå¸¸ä¾¿åˆ©çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Collection Subscript</span></span><br><span class="line"><span class="keyword">var</span> planets = [<span class="string">"Mercury"</span>, <span class="string">"Venus"</span>, <span class="string">"Earth"</span>, <span class="string">"Mars"</span>, <span class="string">"Jupiter"</span>, <span class="string">"Saturn"</span>, <span class="string">"Uranus"</span>, <span class="string">"Neptune"</span>]</span><br><span class="line"><span class="keyword">let</span> outsideAsteroidBelt = planets[<span class="number">4</span>...] <span class="comment">// Before: planets[4..&lt;planets.endIndex]</span></span><br><span class="line"><span class="keyword">let</span> firstThree = planets[..&lt;<span class="number">4</span>]          <span class="comment">// Before: planets[planets.startIndex..&lt;4]</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä½ æ‰€è§ï¼ŒåŠå¼€åŒºé—´ä¸éœ€è¦æŒ‡æ˜å¼€å§‹æˆ–è€…ç»“æŸçš„ç´¢å¼•ã€‚</p>
<h4 id="Infinite-Sequence"><a href="#Infinite-Sequence" class="headerlink" title="Infinite Sequence"></a>Infinite Sequence</h4><p>åŒæ—¶å…è®¸ä½ ä»ä¸€ä¸ªå¯è®¡ç®—çš„å¼€å§‹ç´¢å¼•å®šä¹‰ä¸€ä¸ªæ— é™çš„ <code>Sequence</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Infinite range: 1...infinity</span></span><br><span class="line"><span class="keyword">var</span> numberedPlanets = <span class="type">Array</span>(<span class="built_in">zip</span>(<span class="number">1</span>..., planets))</span><br><span class="line"><span class="built_in">print</span>(numberedPlanets) <span class="comment">// [(1, "Mercury"), (2, "Venus"), ..., (8, "Neptune")]</span></span><br><span class="line"></span><br><span class="line">planets.append(<span class="string">"Pluto"</span>)</span><br><span class="line">numberedPlanets = <span class="type">Array</span>(<span class="built_in">zip</span>(<span class="number">1</span>..., planets))</span><br><span class="line"><span class="built_in">print</span>(numberedPlanets) <span class="comment">// [(1, "Mercury"), (2, "Venus"), ..., (9, "Pluto")]</span></span><br></pre></td></tr></table></figure>
<h4 id="Pattern-Matching"><a href="#Pattern-Matching" class="headerlink" title="Pattern Matching"></a>Pattern Matching</h4><p>åŠå¼€åŒºé—´å¦ä¸€ä¸ªå¾ˆå¥½çš„ç”¨æ³•æ˜¯æ¨¡å¼åŒ¹é…ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pattern matching</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">temperature</span><span class="params">(planetNumber: Int)</span></span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> planetNumber &#123;</span><br><span class="line">  <span class="keyword">case</span> ...<span class="number">2</span>: <span class="comment">// anything less than or equal to 2</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Too hot"</span>)</span><br><span class="line">  <span class="keyword">case</span> <span class="number">4</span>...: <span class="comment">// anything greater than or equal to 4</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Too cold"</span>)</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Justtttt right"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">temperature(planetNumber: <span class="number">3</span>) <span class="comment">// Earth</span></span><br></pre></td></tr></table></figure>
<h3 id="Generic-Subscripts"><a href="#Generic-Subscripts" class="headerlink" title="Generic Subscripts"></a>Generic Subscripts</h3><p>ä¸‹æ ‡æ˜¯ä¸€ç§ç›´è§‚ä¸”é‡è¦çš„è®¿é—®æ•°æ®çš„æ–¹å¼ï¼Œä¸ºäº†æ”¹å–„æ•ˆç‡ï¼Œç°åœ¨å¯ä»¥ç”¨åœ¨æ™®é€šç±»å‹<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0148-generic-subscripts.md" target="_blank" rel="noopener">[SE-0148]</a>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">GenericDictionary</span>&lt;<span class="title">Key</span>: <span class="title">Hashable</span>, <span class="title">Value</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> data: [<span class="type">Key</span>: <span class="type">Value</span>]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">init</span>(data: [<span class="type">Key</span>: <span class="type">Value</span>]) &#123;</span><br><span class="line">    <span class="keyword">self</span>.data = data</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">subscript</span>&lt;<span class="type">T</span>&gt;(key: <span class="type">Key</span>) -&gt; <span class="type">T</span>? &#123;</span><br><span class="line">    <span class="keyword">return</span> data[key] <span class="keyword">as</span>? <span class="type">T</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¾‹å­ä¸­çš„è¿”å›å€¼æ˜¯æ³›å‹ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ³›å‹ä¸­è¿™æ ·ä½¿ç”¨ä¸‹æ ‡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Dictionary of type: [String: Any]</span></span><br><span class="line"><span class="keyword">var</span> earthData = <span class="type">GenericDictionary</span>(data: [<span class="string">"name"</span>: <span class="string">"Earth"</span>, <span class="string">"population"</span>: <span class="number">7500000000</span>, <span class="string">"moons"</span>: <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// Automatically infers return type without "as? String"</span></span><br><span class="line"><span class="keyword">let</span> name: <span class="type">String</span>? = earthData[<span class="string">"name"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// Automatically infers return type without "as? Int"</span></span><br><span class="line"><span class="keyword">let</span> population: <span class="type">Int</span>? = earthData[<span class="string">"population"</span>]</span><br></pre></td></tr></table></figure>
<p>ä¸ä»…ä»…æ˜¯è¿”å›å€¼å¯ä»¥æ˜¯æ³›å‹çš„ï¼Œä¸‹æ ‡ä¹Ÿå¯ä»¥æ˜¯æ³›å‹çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">extension GenericDictionary &#123;</span><br><span class="line">  subscript&lt;Keys: Sequence&gt;(keys: Keys) -&gt; [Value] where Keys.Iterator.Element == Key &#123;</span><br><span class="line">    var values: [Value] = []</span><br><span class="line">    for key in keys &#123;</span><br><span class="line">      if let value = data[key] &#123;</span><br><span class="line">        values.append(value)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return values</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Array subscript value</span><br><span class="line">let nameAndMoons = earthData[[&quot;moons&quot;, &quot;name&quot;]]        // [1, &quot;Earth&quot;]</span><br><span class="line">// Set subscript value</span><br><span class="line">let nameAndMoons2 = earthData[Set([&quot;moons&quot;, &quot;name&quot;])]  // [1, &quot;Earth&quot;]</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œä¼ é€’ä¸¤ä¸ªä¸åŒçš„ <code>Sequence</code> ç±»å‹ï¼ˆ<code>Array</code> å’Œ <code>Set</code>ï¼‰ä¼šå¾—åˆ°å„è‡ªçš„ vlaues ç»„æˆçš„æ•°ç»„ã€‚</p>
<h2 id="Miscellaneous"><a href="#Miscellaneous" class="headerlink" title="Miscellaneous"></a>Miscellaneous</h2><p>ä»¥ä¸Šåˆ—ä¸¾çš„å›Šæ‹¬äº†swift4ä¸­æœ€å¤§å˜åŒ–çš„éƒ¨åˆ†, ç°åœ¨è®©æˆ‘ä»¬å¿«é€Ÿçœ‹çœ‹å…¶ä»–æ–¹é¢çš„å°æ”¹åŠ¨ã€‚</p>
<h3 id="MutableCollection-swapAt"><a href="#MutableCollection-swapAt" class="headerlink" title="MutableCollection.swapAt(_:_:)"></a>MutableCollection.swapAt(_:_:)</h3><p><code>MutableCollection</code> ç°åœ¨æœ‰ <code>swapAt(_:_:)</code> æ–¹æ³•ï¼Œæ­£å¦‚å®ƒçš„å‘½åï¼Œç”¨æ¥äº¤æ¢ç»™å®šä¸‹æ ‡çš„å€¼ <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0173-swap-indices.md" target="_blank" rel="noopener">[SE-0173]</a>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Very basic bubble sort with an in-place swap</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">bubbleSort</span>&lt;T: Comparable&gt;<span class="params">(<span class="number">_</span> array: [T])</span></span> -&gt; [<span class="type">T</span>] &#123;</span><br><span class="line">  <span class="keyword">var</span> sortedArray = array</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;sortedArray.<span class="built_in">count</span> - <span class="number">1</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">1</span>..&lt;sortedArray.<span class="built_in">count</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> sortedArray[j-<span class="number">1</span>] &gt; sortedArray[j] &#123;</span><br><span class="line">        sortedArray.swapAt(j-<span class="number">1</span>, j) <span class="comment">// New MutableCollection method</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sortedArray</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bubbleSort([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>]) <span class="comment">// [0, 1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>
<h3 id="Associated-Type-Constraints"><a href="#Associated-Type-Constraints" class="headerlink" title="Associated Type Constraints"></a>Associated Type Constraints</h3><p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ <code>where</code> ä»å¥çº¦æŸç›¸å…³çš„ç±»å‹<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0142-associated-types-constraints.md" target="_blank" rel="noopener">[SE-0142]</a>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">MyProtocol</span> </span>&#123;</span><br><span class="line">  associatedtype <span class="type">Element</span></span><br><span class="line">  associatedtype <span class="type">SubSequence</span> : <span class="type">Sequence</span> <span class="keyword">where</span> <span class="type">SubSequence</span>.<span class="type">Iterator</span>.<span class="type">Element</span> == <span class="type">Iterator</span>.<span class="type">Element</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡çº¦æŸåè®®ï¼Œ<code>associatedtype</code> å£°æ˜å¯ä»¥ç›´æ¥é™åˆ¶å®ƒä»¬çš„å€¼,ä¸å¿…åœ¨å¤§è´¹å‘¨æŠ˜ã€‚</p>
<h3 id="Class-and-Protocol-Existential"><a href="#Class-and-Protocol-Existential" class="headerlink" title="Class and Protocol Existential"></a>Class and Protocol Existential</h3><p>æœ€åä¸€ä¸ªä» <code>Objective-C</code> æ¬è¿‡æ¥çš„ç‰¹æ€§æ˜¯å¯ä»¥å®šä¹‰ä¸€ä¸ªç±»å‹éµå®ˆä¸€ç±»æˆ–ä¸€ç»„åè®®<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0156-subclass-existentials.md" target="_blank" rel="noopener">[SE-0156]</a>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">MyProtocol</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">View</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewSubclass</span>: <span class="title">View</span>, <span class="title">MyProtocol</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> delegate: (<span class="type">View</span> &amp; <span class="type">MyProtocol</span>)?</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myClass = <span class="type">MyClass</span>()</span><br><span class="line"><span class="comment">//myClass.delegate = View() // error: cannot assign value of type 'View' to type '(View &amp; MyProtocol)?'</span></span><br><span class="line">myClass.delegate = <span class="type">ViewSubclass</span>()</span><br></pre></td></tr></table></figure>
<h3 id="Limiting-objc-Inference"><a href="#Limiting-objc-Inference" class="headerlink" title="Limiting @objc Inference"></a>Limiting @objc Inference</h3><p>è¦å‘ Objective-C æš´éœ²ä½ çš„ Swift API ï¼Œå¯ä»¥ä½¿ç”¨ <code>@objc</code> ç¼–è¯‘æ ‡å¿—ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ç¼–è¯‘å™¨å¯ä»¥ä¸ºä½ æ¨å¯¼ã€‚ä½†æ˜¯å¤§é‡çš„æ¨ç†ä¼šå¯¼è‡´ä¸‰ä¸ªä¸»è¦çš„é—®é¢˜:</p>
<ol>
<li>å¯èƒ½æ˜¾è‘—çš„å¢åŠ ä½ çš„äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°</li>
<li>æœ‰æ—¶å€™æ— æ³•å‡†ç¡®çš„æ¨å€’</li>
<li>å¢åŠ æ„æˆ  Objective-C  æ–¹æ³•é€‰æ‹©å™¨å†²çªçš„é£é™©</li>
</ol>
<p>Swift 4 é€šè¿‡é™åˆ¶ <code>@objc</code> çš„æ¨å¯¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ„å‘³ç€å½“ä½ éœ€è¦ <code>Objective-C</code> æ‰€æœ‰çš„åŠ¨æ€è°ƒåº¦åŠŸèƒ½æ˜¯ï¼Œä½ ä¸»è¦æ˜ç¡®çš„ä½¿ç”¨ <code>@objc</code>ã€‚<br>ä¸¾å‡ ä¸ªä½ éœ€è¦ä¿®æ”¹çš„ç¤ºä¾‹åŒ…æ‹¬ <code>private</code> æ–¹æ³•ï¼ŒåŠ¨æ€å£°æ˜ å’Œ <code>NSObject</code>  åŸºç±»çš„ä¸€äº›æ–¹æ³•ã€‚</p>
<h3 id="NSNumber-Bridging"><a href="#NSNumber-Bridging" class="headerlink" title="NSNumber Bridging"></a>NSNumber Bridging</h3><p>åœ¨å¾ˆé•¿æ—¶é—´å†…ï¼Œ<code>NSNumber</code> å’Œ Swift numbers æœ‰å¾ˆå¤šå¥‡æ€ªçš„è¡Œä¸ºéƒ½å›°æ‰°è¿™è¿™é—¨è¯­è¨€ã€‚Swift 4 å¹²æ‰äº†è¿™äº›bug <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0170-nsnumber_bridge.md" target="_blank" rel="noopener">[SE-0170]</a>ï¼š</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªç¤ºèŒƒï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> n = <span class="type">NSNumber</span>(value: <span class="number">999</span>)</span><br><span class="line"><span class="keyword">let</span> v = n <span class="keyword">as</span>? <span class="type">UInt8</span> <span class="comment">// Swift 4: nil, Swift 3: 231</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ Swift 3 ä¸­ä¼šå‡ºç°çš„æ€ªå¼‚ç°è±¡ï¼Œå¦‚æœæ•°å­—æº¢å‡ºï¼Œå®ƒä¼šç®€å•çš„ä»0å¼€å§‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ 999% 2 ^ 8 = 231ã€‚</p>
<p>Swift 4 è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œåªæœ‰å½“å¼ºè½¬åçš„ç±»å‹å¯ä»¥å®‰å…¨çš„å®¹çº³æ—¶ï¼Œæ‰ä¼šè¿”å›å€¼ã€‚</p>
<h2 id="Swift-Package-Manager"><a href="#Swift-Package-Manager" class="headerlink" title="Swift Package Manager"></a>Swift Package Manager</h2><p>è¿‘å‡ ä¸ªæœˆï¼ŒSwift åŒ…ç®¡ç†æœ‰è®¸å¤šæ›´æ–°ï¼Œä¸€äº›æ¯”è¾ƒå¤§çš„æ›´æ–°å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä» branch æˆ–è€… comint hash ä¸­è·å–ä¾èµ–</li>
<li>å¯¹å¯æ¥å—çš„åŒ…æ›´å¤šçš„æ”¯é…</li>
<li>ç”¨æ›´ä¸ºå¸¸è§çš„è§£å†³æ–¹æ¡ˆä»£æ›¿ä¸ç›´è§‚çš„å‘½ä»¤</li>
<li>èƒ½å¤Ÿå®šä¹‰ç”¨æ¥ç¼–è¯‘çš„ Swift ç‰ˆæœ¬</li>
<li>ä¸ºæ¯ä¸ª target æŒ‡æ˜ source files è·¯å¾„ã€‚</li>
</ol>
<p>è¿™äº›æ˜¯ SPM åœ¨å¿…ç»ä¹‹è·¯ä¸Šè¿ˆå‡ºçš„å¤§æ­¥ä¼ï¼Œå®ƒè¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç§¯æå‚ä¸æè®®æ¥å¸®å¿™å®Œå–„å®ƒã€‚</p>
<p>æœ‰å…³æœ€è¿‘å·²è§£å†³çš„ææ¡ˆçš„è¯¦ç»†æè¿°ï¼Œè¯·æŸ¥çœ‹<a href="https://lists.swift.org/pipermail/swift-build-dev/Week-of-Mon-20170605/001019.html" target="_blank" rel="noopener">Swift 4 Package Manager Update</a></p>
<h2 id="Still-In-Progress"><a href="#Still-In-Progress" class="headerlink" title="Still In Progress"></a>Still In Progress</h2><p>åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œé˜Ÿåˆ—ä¸­ä»æœ‰15ä¸ªæ¥å—çš„ææ¡ˆã€‚å¦‚æœä½ æƒ³ä¸€ç¹ä¸ºå¿«ï¼Œè®¿é—®<a href="https://apple.github.io/swift-evolution/" target="_blank" rel="noopener">Swift Evolution Proposals</a> ç„¶åç”¨ <code>Accepted</code> ç­›é€‰.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
            <a href="/tags/Swift/" rel="tag"># Swift</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/11/28/Automatic-Reference-Counting/" rel="next" title="Objective-Cå†…å­˜ç®¡ç†çŸ¥è¯†æ¢³ç†">
                <i class="fa fa-chevron-left"></i> Objective-Cå†…å­˜ç®¡ç†çŸ¥è¯†æ¢³ç†
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/07/07/Mac-PHP-MAMP/" rel="prev" title="macOSä¸‹ä½¿ç”¨MAMPé…ç½®å¤šç«™ç‚¹PHPé›†æˆå¼€å‘ç¯å¢ƒ">
                macOSä¸‹ä½¿ç”¨MAMPé…ç½®å¤šç«™ç‚¹PHPé›†æˆå¼€å‘ç¯å¢ƒ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="iDevOrz" />
          <p class="site-author-name" itemprop="name">iDevOrz</p>
           
              <p class="site-description motion-element" itemprop="description">Write the bug. Change the world</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">37</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/iDevorz" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.weibo.com/Jatstar" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                    
                      Weibo
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://zhihu.com/people/Jatstar" target="_blank" title="Zhihu">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      Zhihu
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              å‹æƒ…é“¾æ¥
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.zimu.xybeta.com" title="åˆ˜å­æ²çš„åšå®¢" target="_blank">åˆ˜å­æ²çš„åšå®¢</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Getting-Started"><span class="nav-number">1.</span> <span class="nav-text">Getting Started</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Migrating-to-Swift-4"><span class="nav-number">2.</span> <span class="nav-text">Migrating to Swift 4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#API-Changes"><span class="nav-number">3.</span> <span class="nav-text">API Changes</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#String"><span class="nav-number">3.1.</span> <span class="nav-text">String</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dictionary-å’Œ-Set"><span class="nav-number">3.2.</span> <span class="nav-text">Dictionary å’Œ Set</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Sequence-Based-Initialization"><span class="nav-number">3.2.1.</span> <span class="nav-text">Sequence Based Initialization</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Duplicate-Key-Resolution"><span class="nav-number">3.2.2.</span> <span class="nav-text">Duplicate Key Resolution</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Filtering"><span class="nav-number">3.2.3.</span> <span class="nav-text">Filtering</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dictionary-Mapping"><span class="nav-number">3.2.4.</span> <span class="nav-text">Dictionary Mapping</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dictionary-Default-Values"><span class="nav-number">3.2.5.</span> <span class="nav-text">Dictionary Default Values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dictionary-Grouping"><span class="nav-number">3.2.6.</span> <span class="nav-text">Dictionary Grouping</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Reserving-Capacity"><span class="nav-number">3.2.7.</span> <span class="nav-text">Reserving Capacity</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Private-Access-Modifier"><span class="nav-number">3.2.8.</span> <span class="nav-text">Private Access Modifier</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#API-Additions"><span class="nav-number">4.</span> <span class="nav-text">API Additions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Archival-and-Serialization"><span class="nav-number">4.1.</span> <span class="nav-text">Archival and Serialization</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Value-Coding"><span class="nav-number">4.2.</span> <span class="nav-text">Key-Value Coding</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#One-Sided-Ranges"><span class="nav-number">4.3.</span> <span class="nav-text">One-Sided Ranges</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Infinite-Sequence"><span class="nav-number">4.3.1.</span> <span class="nav-text">Infinite Sequence</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Pattern-Matching"><span class="nav-number">4.3.2.</span> <span class="nav-text">Pattern Matching</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Generic-Subscripts"><span class="nav-number">4.4.</span> <span class="nav-text">Generic Subscripts</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Miscellaneous"><span class="nav-number">5.</span> <span class="nav-text">Miscellaneous</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MutableCollection-swapAt"><span class="nav-number">5.1.</span> <span class="nav-text">MutableCollection.swapAt(_:_:)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Associated-Type-Constraints"><span class="nav-number">5.2.</span> <span class="nav-text">Associated Type Constraints</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Class-and-Protocol-Existential"><span class="nav-number">5.3.</span> <span class="nav-text">Class and Protocol Existential</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Limiting-objc-Inference"><span class="nav-number">5.4.</span> <span class="nav-text">Limiting @objc Inference</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSNumber-Bridging"><span class="nav-number">5.5.</span> <span class="nav-text">NSNumber Bridging</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-Package-Manager"><span class="nav-number">6.</span> <span class="nav-text">Swift Package Manager</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Still-In-Progress"><span class="nav-number">7.</span> <span class="nav-text">Still In Progress</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 &mdash; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">iDevOrz</span>

  
</div>


  <div class="powered-by">
    Hosted by  <a class="theme-link" href="https://pages.coding.me">Coding Pages</a>
  </div>

  <span class="post-meta-divider">|</span>
  <div class="theme-info">
    ä¸»é¢˜ &mdash;
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Mist
    </a>
  </div>

  <span class="post-meta-divider">|</span>
  <div class="powered-by">
    <a class="theme-link" href="https://www.miitbeian.gov.cn">ç²¤ICPå¤‡16014512å·-1</a>
  </div>


        


<script>
  	var _mtac = {};
  	(function() {
  		var mta = document.createElement("script");
  		mta.src = "https://pingjs.qq.com/h5/stats.js?v2.0.4";
  		mta.setAttribute("name", "MTAH5");
  		mta.setAttribute("sid", "500492087");

  		var s = document.getElementsByTagName("script")[0];
  		s.parentNode.insertBefore(mta, s);
  	})();
</script>



  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=57342025";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  

    
      <script id="dsq-count-scr" src="https://jatstar-cn.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'https://www.devorz.com/2017/06/19/What-s-New-in-Swift4/';
          this.page.identifier = '2017/06/19/What-s-New-in-Swift4/';
          this.page.title = 'What\'s New in Swift4?';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://jatstar-cn.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  










  





  

  

  

  

  

  

</body>
</html>
